<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Game</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <script type="text/javascript" src="../Logic/jquery-1.11.0.min.js"></script>
        <link rel="stylesheet" href="../CSS/style.css">
        <script type="text/javascript" src="qrcode.js"></script>
        <!--QR-->
        <script src="Phaser/phaser.min.js" charset="utf-8"></script>
        <script src="../Logic/connect.js"></script>
    </head>
    <body type="text/javascript">
        <script>
            //inicio capturando movimiento
            document.onkeydown = function(e){
                if(e.keyCode == 37){
                    moveAntiClockWise(1);
                }
                if(e.keyCode == 39){
                    moveClockWise(1);
                }
                if(e.keyCode == 32){
                    //alert('hitWhiteBall');
                    hitWhiteBall();
                }
            }
            //fin capturando movimiento

            //captar cursor
            var webSocket = {};
            var element;
            var obj;
            var cursor = "";
            var audio = new Audio("../Assets/music/intro_sfx.mp3");
            audio.addEventListener(
                'ended', 
                function () {
                    this.currentTime = 0;
                    this.play();
                },
                false);
            
            audio.play();
            //fin captar cursor

            /*
            var game = new Phaser.Game(
                type: Phaser.AUTO,
                width: 1920,
                height: 1080,
                transparent: true, 
                //Phaser.CANVAS, 
                parent: 'phaser-example', 
                scene: { 
                    preload: preload, 
                    create: create 
                }
            );
            */

            var config = {
                type: Phaser.AUTO,
                width: 1920,
                height: 1080,
                //transparent: true,
                backgroundColor: '#006400',
                parent: 'phaser-example',
                physics: {
                    default: 'arcade',
                    arcade: {
                        //gravity: { y: 300 },
                        debug: false
                    }
                },
                scene: {
                    preload: preload,
                    create: create,
                    update: update
                }
            };
            
            var game = new Phaser.Game(config);
            
            var ball;
            
            function preload ()
            {
                this.load.spritesheet('ball', 'https://i.ibb.co/Yy8GcWT/white-Ball.png', { frameWidth: 200, frameHeight: 200 });//wwun
            }

            var image;

            function create ()
            {
                //this.matter.world.setBounds(0, 0, 1920, 1080, 32, true, true, false, true);
                
                //var ball = this.matter.add.image(500, 500, 'ball');
                //ball.setCircle();
                //ball.setFriction(0.005);
                //ball.setBounce(1);

                ball = this.physics.add.sprite(100, 450, 'ball');
                ball.setBounce(0.2);
                ball.setCollideWorldBounds(true);

                this.anims.create({
                    key: 'left',
                    frames: this.anims.generateFrameNumbers('ball', { start: 0, end: 3 }),
                    frameRate: 10,
                    repeat: -1
                });

                this.anims.create({
                    key: 'turn',
                    frames: [ { key: 'ball', frame: 4 } ],
                    frameRate: 20
                });

                this.anims.create({
                    key: 'right',
                    frames: this.anims.generateFrameNumbers('ball', { start: 5, end: 8 }),
                    frameRate: 10,
                    repeat: -1
                });

                cursors = this.input.keyboard.createCursorKeys();
            }

            function update ()
            {
                //arrow.angle += 0.2; //gira el ángulo

                //escribe texto blanco sobre rotación
                
                ball.setVelocityX(180);

                ball.anims.play('right', true);

            }
        </script>
    </body>
</html>